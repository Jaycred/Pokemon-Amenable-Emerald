SootopolisCity_MysteryEventsHouse_B1F_MapScripts::
	map_script MAP_SCRIPT_ON_TRANSITION, SootopolisCity_MysteryEventsHouse_B1F_OnTransition
	map_script MAP_SCRIPT_ON_FRAME_TABLE, SootopolisCity_MysteryEventsHouse_B1F_OnFrame
	.byte 0

SootopolisCity_MysteryEventsHouse_B1F_OnTransition:
	@ special SetEReaderTrainerGfxId
	end

SootopolisCity_MysteryEventsHouse_B1F_OnFrame:
	map_script_2 VAR_TEMP_1, 0, SootopolisCity_MysteryEventsHouse_B1F_EventScript_BattleVisitingTrainer
	.2byte 0

SootopolisCity_MysteryEventsHouse_B1F_EventScript_BattleVisitingTrainer::
	lockall
	applymovement OBJ_EVENT_ID_PLAYER, SootopolisCity_MysteryEventsHouse_B1F_Movement_PlayerEnterBasement
	waitmovement 0

	msgbox SootopolisCity_MysteryEventsHouse_B1F_Text_Red, MSGBOX_DEFAULT
	trainerbattle_no_intro TRAINER_RED_MYSTERY_EVENTS_HOUSE, SootopolisCity_MysteryEventsHouse_B1F_Text_RedWon

	special HealPlayerParty

	setflag FLAG_RED_DEFEATED
	clearflag FLAG_RED_AVAILABLE

	applymovement OBJ_EVENT_ID_PLAYER, SootopolisCity_MysteryEventsHouse_B1F_Movement_PlayerExitBasement
	waitmovement 0

	warp MAP_SOOTOPOLIS_CITY_MYSTERY_EVENTS_HOUSE_1F, 3, 3
	waitstate
	releaseall
	end

SootopolisCity_MysteryEventsHouse_B1F_EventScript_BattleTie::
	setvar VAR_SOOTOPOLIS_MYSTERY_EVENTS_STATE, 3
	msgbox SootopolisCity_MysteryEventsHouse_B1F_Text_MatchEndedUpDraw, MSGBOX_DEFAULT
	return

SootopolisCity_MysteryEventsHouse_B1F_EventScript_BattleWon::
	setvar VAR_SOOTOPOLIS_MYSTERY_EVENTS_STATE, 1
	message SootopolisCity_MysteryEventsHouse_B1F_Text_RedWon
	waitmessage
	waitbuttonpress
	return

SootopolisCity_MysteryEventsHouse_B1F_EventScript_BattleLost::
	setvar VAR_SOOTOPOLIS_MYSTERY_EVENTS_STATE, 2
	message SootopolisCity_MysteryEventsHouse_B1F_Text_RedLost
	waitmessage
	waitbuttonpress
	return

SootopolisCity_MysteryEventsHouse_B1F_Movement_PlayerEnterBasement:
	walk_down
	walk_down
	walk_down
	walk_right
	walk_right
	step_end

SootopolisCity_MysteryEventsHouse_B1F_Movement_PlayerExitBasement:
	walk_left
	walk_left
	walk_up
	walk_up
	walk_up
	walk_up
	delay_8
	step_end

SootopolisCity_MysteryEventsHouse_B1F_Text_Red:
	.string "…$"
SootopolisCity_MysteryEventsHouse_B1F_Text_RedWon:
	.string "…!$"
SootopolisCity_MysteryEventsHouse_B1F_Text_RedLost:
	.string "…?$"
